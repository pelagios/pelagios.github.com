define(["lib/async!http://maps.google.com/maps/api/js?sensor=false"],function(){function a(a){if(!document.getElementById(a))throw Error("ERROR: Invalid ID for search map");var b=new google.maps.Map(document.getElementById(a),{mapTypeId:google.maps.MapTypeId.TERRAIN}),c=new google.maps.LatLngBounds,d=new google.maps.InfoWindow;this.refresh=function(){google.maps.event.trigger(b,"resize"),b.fitBounds(c)},this.addMarker=function(a,e,f,g){if(a.hasOwnProperty("geometry")&&a.geometry!=null&&a.geometry.hasOwnProperty("type")&&a.geometry.type=="Point"){var h=new google.maps.LatLng(a.geometry.coordinates[1],a.geometry.coordinates[0]),i=new google.maps.Marker({position:h,map:b,title:e});c.extend(h),google.maps.event.addListener(i,"click",function(){return function(){d.close(),d.setContent(f),d.open(b,i),g()}}())}}}return{SearchMap:a}})